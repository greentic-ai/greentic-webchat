<!doctype html>
<html lang="en" data-tenant="demo">
<head>
  <meta charset="utf-8">
  <title>Greentic WebChat Health</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="./js/tenant-resolver.js"></script>
  <style>
    body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif; margin: 2rem; }
    pre { background: #f6f8fa; padding: 1rem; border-radius: 8px; overflow: auto; }
    .ok { color: #0366d6; }
    .err { color: #b00020; }
  </style>
</head>
<body>
  <h1>Greentic WebChat – Health</h1>
  <p>Use this page to debug tenant resolution and skin loading on GitHub Pages.</p>

  <h2>Environment</h2>
  <pre id="env"></pre>

  <h2>Skin Fetch</h2>
  <p>Fetching: <code id="skin-url"></code></p>
  <pre id="skin" class="ok">Loading…</pre>

  <script>
    (function() {
      var info = {
        location: window.location.href,
        pathname: window.location.pathname,
        basePath: window.__BASE_PATH__,
        tenant: window.__TENANT__,
        userAgent: navigator.userAgent
      };
      document.getElementById('env').textContent = JSON.stringify(info, null, 2);
      var resolver = window.__skinUrl__ || function () { return ''; };
      var url = resolver(window.__TENANT__);
      document.getElementById('skin-url').textContent = url || '(missing)';
      if (!url) {
        var missing = document.getElementById('skin');
        missing.textContent = 'No skin URL resolved.';
        missing.className = 'err';
        return;
      }
      fetch(url, { cache: 'no-store' })
        .then(function(res) {
          if (!res.ok) throw new Error('HTTP ' + res.status);
          return res.json();
        })
        .then(function(json) {
          var el = document.getElementById('skin');
          el.textContent = JSON.stringify(json, null, 2);
          el.className = 'ok';
        })
        .catch(function(err) {
          var el = document.getElementById('skin');
          el.textContent = String(err);
          el.className = 'err';
        });
    })();
  </script>
</body>
</html>
